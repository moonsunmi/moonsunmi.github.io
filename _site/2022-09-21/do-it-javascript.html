<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>실전 프로젝트 5~6 | 주경야독학) 개발공부로그</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="실전 프로젝트 5~6" />
<meta name="author" content="Sunmi Moon" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="[실전 5] 로컬 스토리지" />
<meta property="og:description" content="[실전 5] 로컬 스토리지" />
<link rel="canonical" href="http://localhost:4000/2022-09-21/do-it-javascript" />
<meta property="og:url" content="http://localhost:4000/2022-09-21/do-it-javascript" />
<meta property="og:site_name" content="주경야독학) 개발공부로그" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-09-21T22:49:18+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="실전 프로젝트 5~6" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Sunmi Moon","url":"https://moonsunmi.github.io"},"dateModified":"2022-09-21T22:49:18+09:00","datePublished":"2022-09-21T22:49:18+09:00","description":"[실전 5] 로컬 스토리지","headline":"실전 프로젝트 5~6","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2022-09-21/do-it-javascript"},"url":"http://localhost:4000/2022-09-21/do-it-javascript"}</script>
<!-- End Jekyll SEO tag -->


  <!-- CSS -->
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Libre+Baskerville:400,400i,700">

  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png">

  <!-- RSS -->
  <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="주경야독학) 개발공부로그" />

  <!-- Google Analytics-->
  
</head>


  <body>
    <nav class="nav">
  <div class="nav-container">
    <a href="/">
      <h2 class="nav-title">주경야독학) 개발공부로그</h2>
    </a>
    <ul>
      <li><a href="/">Posts</a></li>
      <li><a href="/tags">Tags</a></li>
      <li><a href="/about">About</a></li>
    </ul>
  </div>
</nav>


    <main><div class="post">
  <h1 class="post-title"><do-it 자바스크립트 입문> 실전 프로젝트 5~6</h1>

  <div class="post-info">
    
    <br />
    <span>on&nbsp;</span
    ><time datetime="2022-09-21 22:49:18 +0900">September 21, 2022</time>
    
  </div>

  <h3 id="실전-5-로컬-스토리지">[실전 5] 로컬 스토리지</h3>

<h4 id="로컬-스토리지-알아보기">로컬 스토리지 알아보기</h4>

<p>웹 스토리지의 자료들도 웹 사이트를 서핑하거나 브라우저 탭 을 닫으면 웹 사이트와 관련된 정보들을 저장한다. 하지만 사용자가 웹 스토리지의 정보를 서버로 전송하지 않는 이상 서버에서 사용자 PC로 들어와 스토리지 정보를 읽어가지 못하고, 쿠키보다 용량도 크다.</p>

<ul>
  <li>
    <p>세션 스토리지: 브라우저 창이나 탭을 닫을 때까지를 하나의 세션(session)이라고 하는데, 세션 동안의 자료를 기억하고 있다가 세션이 끝나면(즉 브라우저 창이 닫히거나 탭이 닫히면) 자료를 모두 지워버린다.</p>
  </li>
  <li>
    <p>로컬 스토리지: 세션이 끝나도 계속해서 자료를 저장할 수 있는 스토리지.</p>
  </li>
</ul>

<h4 id="로컬-스토리지-다루는-법">로컬 스토리지 다루는 법</h4>

<p>배열을 로컬 스토리지에 저장할 때는 <code class="language-plaintext highlighter-rouge">JSON.stringify()</code> 메서드를 사용하여 배열에 있는 여러 값을 하나의 문자열처럼 변환해서 저장한다. 그리고 로컬 스토리지에 있는 여러 값으로 된 문자열을 가져와 배열 형태로 변환할 때는 <code class="language-plaintext highlighter-rouge">JSON.parse()</code> 메서드를 사용한다.</p>

<p>배열 저장하기</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">colors</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">black</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">blue</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">red</span><span class="dl">"</span><span class="p">];</span>
<span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="dl">"</span><span class="s2">myColor</span><span class="dl">"</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">colors</span><span class="p">));</span>
</code></pre></div></div>

<p>저장된 배열 가져오기</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">newColors</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="dl">"</span><span class="s2">colors</span><span class="dl">"</span><span class="p">));</span>
</code></pre></div></div>

<p>이미 쇼핑몰 목록이 구현되어 있었고, 나는 로컬스토리지 기능만 추가했다. 로컬스토리지 기능을 위해서는 위에 적은 JSON.stringify와 parse 메서드를 사용해야 한다. stringify라는 단어가 있나? 싶어서 찾아 보니… JSON에서 만든 꽤 그럴 듯한 메서드 이름일 뿐인듯…</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">itemList</span> <span class="o">=</span> <span class="p">[];</span>
<span class="nx">itemList</span> <span class="o">=</span> <span class="nx">getLocalStorage</span><span class="p">();</span>
<span class="nx">showList</span><span class="p">();</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">itemList</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">addBtn</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">#add</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">addBtn</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">click</span><span class="dl">"</span><span class="p">,</span> <span class="nx">addList</span><span class="p">);</span> <span class="c1">// addBtn.onclick = addList; 라고 해도 됨</span>

<span class="kd">function</span> <span class="nx">addList</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">add</span><span class="dl">"</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">#item</span><span class="dl">"</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span> <span class="c1">// 텍스트 필드 내용 가져옴</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">item</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">itemList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span> <span class="c1">// itemList 배열의 끝에 item 변수 값 추가</span>
    <span class="nx">saveLocalStorage</span><span class="p">(</span><span class="nx">itemList</span><span class="p">);</span> <span class="c1">// localStorage에도 배열 형태로 저장한다. localStorage.setItem("itemList", itemList);</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">#item</span><span class="dl">"</span><span class="p">).</span><span class="nx">value</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span> <span class="c1">// id=”item”인 요소의 값을 지움</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">#item</span><span class="dl">"</span><span class="p">).</span><span class="nx">focus</span><span class="p">();</span> <span class="c1">// 텍스트 필드에 focus( ) 메서드 적용</span>
  <span class="p">}</span>
  <span class="nx">showList</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">getLocalStorage</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">savedList</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="dl">"</span><span class="s2">itemList</span><span class="dl">"</span><span class="p">));</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">savedList</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">return</span> <span class="p">[];</span>
  <span class="k">else</span> <span class="k">return</span> <span class="nx">savedList</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">saveLocalStorage</span><span class="p">(</span><span class="nx">itemList</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="dl">"</span><span class="s2">itemList</span><span class="dl">"</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">itemList</span><span class="p">));</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">showList</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">showLIst</span><span class="dl">"</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">list</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">&lt;ul&gt;</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// 목록을 시작하는 &lt;ul&gt; 태그 저장</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">itemList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 배열 요소마다 반복</span>
    <span class="nx">list</span> <span class="o">+=</span>
      <span class="dl">"</span><span class="s2">&lt;li&gt;</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">itemList</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;span class='close' id=</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">i</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&gt;X&lt;/span&gt;&lt;/li&gt;</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// 요소와 삭제 버튼을 &lt;li&gt;~&lt;/li&gt;로 묶음</span>
  <span class="p">}</span>
  <span class="nx">list</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">&lt;/ul&gt;</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// 목록을 끝내는 &lt;/ul&gt; 태그 저장</span>

  <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">#itemList</span><span class="dl">"</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">list</span><span class="p">;</span> <span class="c1">// list 내용 표시</span>

  <span class="kd">var</span> <span class="nx">remove</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="dl">"</span><span class="s2">.close</span><span class="dl">"</span><span class="p">);</span> <span class="c1">// 삭제 버튼을 변수로 저장. 배열 형태가 됨</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">remove</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// remove 배열의 요소 모두를 확인</span>
    <span class="nx">remove</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">click</span><span class="dl">"</span><span class="p">,</span> <span class="nx">removeList</span><span class="p">);</span> <span class="c1">// 요소를 클릭하면 removeList() 실행</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">removeList</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">);</span> <span class="c1">// this(클릭한 삭제 버튼)의 id 값 가져와 id 변수에 저장</span>
  <span class="nx">itemList</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span> <span class="c1">// itemList 배열에서 인덱스 값이 id인 요소 1개 삭제</span>
  <span class="nx">saveLocalStorage</span><span class="p">(</span><span class="nx">itemList</span><span class="p">);</span>
  <span class="nx">showList</span><span class="p">();</span> <span class="c1">// 변경된 itemList 배열을 다시 화면에 표시</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="실전-6-타이머">[실전 6] 타이머</h3>

<ul>
  <li>1초: 1000밀리초</li>
  <li><code class="language-plaintext highlighter-rouge">setInterval(반복함수, 간격)</code> 메서드는 간격(밀리초 단위)만큼 시간을 두고 ‘반복함수’를 계속 실행한다.</li>
  <li><code class="language-plaintext highlighter-rouge">clearInterval(setInterval())</code> 메서드는 주어진 setInterval을 멈춘다.</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">leftTime</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">timer</span><span class="p">;</span>

<span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">.start-btn</span><span class="dl">"</span><span class="p">).</span><span class="nx">onclick</span> <span class="o">=</span> <span class="nx">startTimer</span><span class="p">;</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">.reset-btn</span><span class="dl">"</span><span class="p">).</span><span class="nx">onclick</span> <span class="o">=</span> <span class="nx">stopTimer</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">startTimer</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// 남은 시간을 표시한다.</span>
  <span class="nx">leftTime</span> <span class="o">=</span>
    <span class="nb">Number</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">#startMin</span><span class="dl">"</span><span class="p">).</span><span class="nx">value</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span> <span class="o">+</span>
    <span class="nb">Number</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">#startSec</span><span class="dl">"</span><span class="p">).</span><span class="nx">value</span><span class="p">);</span>
  <span class="nx">timer</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span><span class="nx">ticking</span><span class="p">,</span> <span class="mi">1000</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">stopTimer</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// 반복을 멈추고, 타이머 마무리 작업을 한다.</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">#startMin</span><span class="dl">"</span><span class="p">).</span><span class="nx">value</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">#startSec</span><span class="dl">"</span><span class="p">).</span><span class="nx">value</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">#display</span><span class="dl">"</span><span class="p">).</span><span class="nx">innerText</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">타이머 종료</span><span class="dl">"</span><span class="p">;</span>
  <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">timer</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">ticking</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// 1초가 지나갈 때마다 호출되는 함수</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">leftTime</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">stopTimer</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">leftTime</span> <span class="o">-=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">#display</span><span class="dl">"</span><span class="p">).</span><span class="nx">innerText</span> <span class="o">=</span>
      <span class="nb">parseInt</span><span class="p">(</span><span class="nx">leftTime</span> <span class="o">/</span> <span class="mi">60</span><span class="p">)</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">분 </span><span class="dl">"</span> <span class="o">+</span> <span class="p">(</span><span class="nx">leftTime</span> <span class="o">%</span> <span class="mi">60</span><span class="p">)</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">초 남았습니다.</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//leftTime + '남았습니다.';</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>모범 답안에서는 초 단위에서의 카운팅과 분 단위에서의 카운팅을 따로 했다. 나는 그냥 leftTime값을 이용해 분과 초를 계산해서 출력했다. 프로그래밍하던 중 값을 확인하기 위해 <code class="language-plaintext highlighter-rouge">console.log</code>를 몇 개 추가했더니, 1초보다 많은 시간과 적은 시간이 왔다갔다 하면서 카운팅되었다. 이 프로그램이 정확하게 1초마다 카운팅되는 걸 보장해서 실전에서도 쓸 만한 상태인지는 잘 모르겠다.</p>

</div>



<div class="pagination">
  
  <a href="/2022-09-22/github" class="left arrow"
    >&#8592;</a
  >
   
  <a href="/2022-09-20/do-it-javascript" class="right arrow"
    >&#8594;</a
  >
  

  <a href="#" class="top">Top</a>
</div>
</main>

    <footer>
  <span>
    &copy; <time datetime="2023-08-05 22:38:38 +0900">2023</time> Sunmi Moon. Made with Jekyll using the <a href="https://github.com/chesterhow/tale/">Tale</a> theme.
  </span>
</footer>

  </body>
</html>
