<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>파이썬 웹 프로그래밍 공부 7 | 주경야독학) 개발공부로그</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="파이썬 웹 프로그래밍 공부 7" />
<meta name="author" content="Sunmi Moon" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="각각의 폼 필드는 위젯 클래스를 가지고 있다. CharField 필드 타입은 TextInput이 디폴트 위젯이다. 이 위젯 클래스는 &lt;input type=&quot;text&quot;&gt;와 같은 HTML 폼 위젯으로 대응된다. 디폴트 위젯을 &lt;textarea&gt;로 변경하려면 폼 필드를 정의할 때 명시적으로 지정하면 된다." />
<meta property="og:description" content="각각의 폼 필드는 위젯 클래스를 가지고 있다. CharField 필드 타입은 TextInput이 디폴트 위젯이다. 이 위젯 클래스는 &lt;input type=&quot;text&quot;&gt;와 같은 HTML 폼 위젯으로 대응된다. 디폴트 위젯을 &lt;textarea&gt;로 변경하려면 폼 필드를 정의할 때 명시적으로 지정하면 된다." />
<link rel="canonical" href="http://localhost:4000/2022-09-04/python-web-programming-7" />
<meta property="og:url" content="http://localhost:4000/2022-09-04/python-web-programming-7" />
<meta property="og:site_name" content="주경야독학) 개발공부로그" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-09-04T22:18:12+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="파이썬 웹 프로그래밍 공부 7" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Sunmi Moon","url":"https://moonsunmi.github.io"},"dateModified":"2022-09-04T22:18:12+09:00","datePublished":"2022-09-04T22:18:12+09:00","description":"각각의 폼 필드는 위젯 클래스를 가지고 있다. CharField 필드 타입은 TextInput이 디폴트 위젯이다. 이 위젯 클래스는 &lt;input type=&quot;text&quot;&gt;와 같은 HTML 폼 위젯으로 대응된다. 디폴트 위젯을 &lt;textarea&gt;로 변경하려면 폼 필드를 정의할 때 명시적으로 지정하면 된다.","headline":"파이썬 웹 프로그래밍 공부 7","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2022-09-04/python-web-programming-7"},"url":"http://localhost:4000/2022-09-04/python-web-programming-7"}</script>
<!-- End Jekyll SEO tag -->


  <!-- CSS -->
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Libre+Baskerville:400,400i,700">

  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png">

  <!-- RSS -->
  <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="주경야독학) 개발공부로그" />

  <!-- Google Analytics-->
  
</head>


  <body>

    <nav class="nav">
  <div class="nav-container">
    <a href="/">
      <h2 class="nav-title">주경야독학) 개발공부로그</h2>
    </a>
    <ul>
      <li><a href="/">Posts</a></li>
      <li><a href="/tags">Tags</a></li>
      <li><a href="/about">About</a></li>
    </ul>
  </div>
</nav>


    <main>
      <div class="post">
  <div class="post-info">
    <span>Written by</span>
    
        Sunmi Moon
    

    
      <br>
      <span>on&nbsp;</span><time datetime="2022-09-04 22:18:12 +0900">September 04, 2022</time>
    
  </div>

  <h1 class="post-title">파이썬 웹 프로그래밍 공부 7</h1>
  <div class="post-line"></div>

  <p>각각의 폼 필드는 위젯 클래스를 가지고 있다. CharField 필드 타입은 TextInput이 디폴트 위젯이다. 이 위젯 클래스는 <code class="language-plaintext highlighter-rouge">&lt;input type="text"&gt;</code>와 같은 HTML 폼 위젯으로 대응된다. 디폴트 위젯을 <code class="language-plaintext highlighter-rouge">&lt;textarea&gt;</code>로 변경하려면 폼 필드를 정의할 때 명시적으로 지정하면 된다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">class</span> <span class="nc">NameForm</span><span class="p">(</span><span class="n">forms</span><span class="p">.</span><span class="n">Form</span><span class="p">):</span>
    <span class="n">your_name</span> <span class="o">=</span> <span class="n">forms</span><span class="p">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">'Your name'</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">widget</span><span class="o">=</span><span class="n">forms</span><span class="p">.</span><span class="n">Textarea</span><span class="p">)</span>

<span class="n">NameForm</span><span class="p">:</span> <span class="n">폼</span> <span class="n">클래스</span>
<span class="n">your_name</span><span class="p">:</span> <span class="n">폼</span> <span class="n">필드</span>
<span class="n">CharField</span><span class="p">:</span> <span class="n">이</span> <span class="n">필드의</span> <span class="n">타입</span><span class="p">.</span>
<span class="n">widget</span><span class="o">=</span><span class="n">form</span><span class="p">.</span><span class="n">Textarea</span><span class="p">:</span> <span class="n">디폴트</span> <span class="n">위젯인</span> <span class="n">TextInput</span> <span class="n">대신</span> <span class="n">Textarea로</span> <span class="n">변경한다</span><span class="p">.</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">form.is_valid()</code> 메서드가 True이면 유효한 폼 데이터가 <code class="language-plaintext highlighter-rouge">cleaned_data</code> 속성에 담긴다. 이 데이터를 이용하여 데이터베이스를 변경하거나 로직에 따른 처리를 한다.</p>

<h2 id="클래스형-뷰">클래스형 뷰</h2>

<p>장고의 URL 해석기는 요청과 관련된 파라미터들을 클래스가 아니라 함수에 전달하기 때문에, 클래스형 뷰는 클래스로 진입하기 위한 <code class="language-plaintext highlighter-rouge">as_view()</code> 클래스 메서드를 제공합니다. 이를 진입 메서드라고 한다.</p>

<p>함수형 뷰</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span>

<span class="k">def</span> <span class="nf">my_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">==</span><span class="s">'POST'</span><span class="p">:</span>
        <span class="c1"># 뷰 로직 작성
</span>        <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s">'result'</span><span class="p">)</span>
</code></pre></div></div>

<p>클래스형 뷰</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span>
<span class="kn">from</span> <span class="nn">django.views.generic</span> <span class="kn">import</span> <span class="n">View</span>

<span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="c1"># 뷰 로직 작성
</span>        <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s">'result'</span><span class="p">)</span>
</code></pre></div></div>

<p>GET 요청이 들어 오면, 클래스형 뷰의 내부에 있는 dispatch() 메서드가 get() 메서드로 요청을 중계해 준다.</p>

<p>템플릿뷰 속성
url.py</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">path</span><span class="p">(</span><span class="s">'about/'</span><span class="p">,</span> <span class="n">AboutView</span><span class="p">.</span><span class="n">as_view</span><span class="p">())</span>
<span class="p">]</span>
</code></pre></div></div>

<p>views.py</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">django.views.generic</span> <span class="kn">import</span> <span class="n">TemplateView</span>
<span class="k">class</span> <span class="nc">AboutView</span><span class="p">(</span><span class="n">TemplateView</span><span class="p">):</span>
    <span class="n">template_name</span> <span class="o">=</span> <span class="s">"about.html"</span>
</code></pre></div></div>

<h3 id="제네릭-뷰">제네릭 뷰</h3>
<p>우리가 작성하는 클래스형 뷰의 대부분은 장고가 제공하는 제네릭 뷰를 상속 받게 한다. 장고에서는 공통된 로직을 미리 개발해 놓고 제공하는 뷰를 제네릭 뷰라고 한다. 제네릭 뷰는 클래스형 뷰로 구성되어 있다.</p>

<ul>
  <li>Base View: 뷰 클래스를 생성하고, 다른 제네릭 뷰의 부모 클래스를 제공하는 기본 제네릭 뷰</li>
  <li>Generic Display View: 객체의 리스트를 보여주거나, 특정 객체의 상세 정보를 보여줍니다.</li>
  <li>Generic Edit View: 폼을 통해 객체를 생성, 수정, 삭제하는 기능을 제공</li>
  <li>Generic Date View: 날짜 기반 객체의 연/월/일 페이지로 구분해서 보여준다.</li>
</ul>

<p>함수형 뷰</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponseRedirect</span>
<span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span>

<span class="kn">from</span> <span class="nn">.forms</span> <span class="kn">import</span> <span class="n">MyForm</span>

<span class="k">def</span> <span class="nf">myview</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">request</span><span class="p">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">"POST"</span><span class="p">:</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">MyForm</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="n">POST</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">form</span><span class="p">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="c1"># cleaned_data로 관련 로직 처리
</span>            <span class="k">return</span> <span class="n">HttpResponseRedirect</span><span class="p">(</span><span class="s">'/success/'</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">MyForm</span><span class="p">(</span><span class="n">initial</span><span class="o">=</span><span class="p">{</span><span class="s">'key'</span><span class="p">:</span> <span class="s">'value'</span><span class="p">})</span>
    
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'form_template.html'</span><span class="p">,</span> <span class="p">{</span><span class="s">'form'</span><span class="p">:</span> <span class="n">form</span><span class="p">})</span>
</code></pre></div></div>

<p>클래스형 뷰</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponseRedirect</span>
<span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span>
<span class="kn">from</span> <span class="nn">django.views.generic</span> <span class="kn">import</span> <span class="n">View</span>

<span class="kn">from</span> <span class="nn">.forms</span> <span class="kn">import</span> <span class="n">MyForm</span>

<span class="k">class</span> <span class="nc">MyFormView</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>
    <span class="n">form_class</span> <span class="o">=</span> <span class="n">MyForm</span>
    <span class="n">initial</span> <span class="o">=</span> <span class="p">{</span><span class="s">'key'</span><span class="p">:</span> <span class="s">'value'</span><span class="p">}</span>
    <span class="n">template_name</span> <span class="o">=</span> <span class="s">'form_template.html'</span>
    
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>  <span class="c1"># 최초의 GET
</span>        <span class="n">form</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">form_class</span><span class="p">(</span><span class="n">initial</span><span class="o">=</span><span class="bp">self</span><span class="p">.</span><span class="n">initial</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">template_name</span><span class="p">,</span> <span class="p">{</span><span class="s">'form'</span><span class="p">:</span> <span class="n">form</span><span class="p">})</span>
    
    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">form</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">form_class</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="n">POST</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">form</span><span class="p">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="c1"># cleaned_data로 관련 로직 처리
</span>            <span class="k">return</span> <span class="n">HttpResponseRedirect</span><span class="p">(</span><span class="s">'/success/'</span><span class="p">)</span>    <span class="c1"># 유효한 데이터를 가진 POST
</span>        
        <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">template_name</span><span class="p">,</span> <span class="p">{</span><span class="s">'form'</span><span class="p">:</span> <span class="n">form</span><span class="p">})</span>  <span class="c1"># 유효하지 않은 데이터를 가진 POST
</span>
</code></pre></div></div>

<p>FormView 제네릭 뷰</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">.form</span> <span class="kn">import</span> <span class="n">MyForm</span>
<span class="kn">from</span> <span class="nn">django.views.generic.edit</span> <span class="kn">import</span> <span class="n">FormView</span>

<span class="k">class</span> <span class="nc">MyFormView</span><span class="p">(</span><span class="n">FormView</span><span class="p">):</span>
    <span class="n">form_class</span> <span class="o">=</span> <span class="n">MyForm</span>
    <span class="n">template_name</span> <span class="o">=</span> <span class="s">'form_template.html'</span>
    <span class="n">success_url</span> <span class="o">=</span> <span class="s">'/success/'</span>
    
   <span class="k">def</span> <span class="nf">form_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form</span><span class="p">):</span> 
        <span class="c1"># cleaned_data 관련 로직 처리
</span>        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">MyFormView</span><span class="p">,</span> <span class="bp">self</span><span class="p">).</span><span class="n">form_valid</span><span class="p">(</span><span class="n">form</span><span class="p">)</span>
</code></pre></div></div>

<p>FormView 제네릭 뷰는 get(), post() 메서드도 이미 정의되어 있음.</p>
<ul>
  <li>form_valid() 함수: 유효한 폼 데이터로 처리할 로직 코딩. super()함수를 사용하면, success_url로 리다이렉션 처리된다.</li>
</ul>

<h3 id="로그">로그</h3>

<ul>
  <li>로거: 로깅 시스템의 시작점으로, 로그 메시지를 처리하기 위해 메시지를 담아두는 저장소라고 할 수 있다.</li>
  <li>핸들러: 로거에 있는 메시지에 무슨 작업을 할지 결정하는 엔진</li>
  <li>필터: 로그 레코드가 로거에서 핸들러로 넘겨질 때, 필터를 사용해서 로그 레코드에 추가적인 제어를 할 수 있다.</li>
  <li>포매터: 로그 레코드가 최종적으로 텍스트로 표현된다. 이때 사용할 포맷을 지정한다.</li>
</ul>

<h2 id="5장-실습-예제-확장하기">5장 실습 예제 확장하기</h2>

<p>books/models.py</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>


<span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">models</span><span class="p">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="p">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">authors</span> <span class="o">=</span> <span class="n">models</span><span class="p">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="s">'Author'</span><span class="p">)</span>
    <span class="n">publisher</span> <span class="o">=</span> <span class="n">models</span><span class="p">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s">'Publisher'</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="p">.</span><span class="n">CASCADE</span><span class="p">)</span>
    <span class="n">publication_date</span> <span class="o">=</span> <span class="n">models</span><span class="p">.</span><span class="n">DateField</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">title</span>


<span class="k">class</span> <span class="nc">Author</span><span class="p">(</span><span class="n">models</span><span class="p">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">salutation</span> <span class="o">=</span> <span class="n">models</span><span class="p">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="p">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">models</span><span class="p">.</span><span class="n">EmailField</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">name</span>


<span class="k">class</span> <span class="nc">Publisher</span><span class="p">(</span><span class="n">models</span><span class="p">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="p">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">address</span> <span class="o">=</span> <span class="n">models</span><span class="p">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
    <span class="n">website</span> <span class="o">=</span> <span class="n">models</span><span class="p">.</span><span class="n">URLField</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">name</span>

</code></pre></div></div>

<p>ForeignKey 필드를 사용할 때는 on_delete 옵션을 필수로 지정해야 한다.</p>

<p>views.py</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">django.views.generic.base</span> <span class="kn">import</span> <span class="n">TemplateView</span>
<span class="kn">from</span> <span class="nn">django.views.generic</span> <span class="kn">import</span> <span class="n">ListView</span>
<span class="kn">from</span> <span class="nn">django.views.generic</span> <span class="kn">import</span> <span class="n">DetailView</span>
<span class="kn">from</span> <span class="nn">books.models</span> <span class="kn">import</span> <span class="n">Book</span><span class="p">,</span> <span class="n">Author</span><span class="p">,</span> <span class="n">Publisher</span>


<span class="k">class</span> <span class="nc">BooksModelView</span><span class="p">(</span><span class="n">TemplateView</span><span class="p">):</span>
    <span class="n">template_name</span> <span class="o">=</span> <span class="s">'books/index.html'</span>
    
    <span class="k">def</span> <span class="nf">get_context_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">context</span> <span class="o">=</span> <span class="nb">super</span><span class="p">().</span><span class="n">get_context_data</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">context</span><span class="p">[</span><span class="s">'model_list'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s">'Book'</span><span class="p">,</span> <span class="s">'Author'</span><span class="p">,</span> <span class="s">'Publisher'</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">context</span>


<span class="c1">#--- ListView
</span><span class="k">class</span> <span class="nc">BookList</span><span class="p">(</span><span class="n">ListView</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Book</span>


<span class="k">class</span> <span class="nc">AuthorList</span><span class="p">(</span><span class="n">ListView</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Author</span>


<span class="k">class</span> <span class="nc">PublisherList</span><span class="p">(</span><span class="n">ListView</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Publisher</span>


<span class="c1">#--- DetailView
</span><span class="k">class</span> <span class="nc">BookDetail</span><span class="p">(</span><span class="n">DetailView</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Book</span>
    

<span class="k">class</span> <span class="nc">AuthorDetail</span><span class="p">(</span><span class="n">DetailView</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Author</span>
    

<span class="k">class</span> <span class="nc">PublisherDetail</span><span class="p">(</span><span class="n">DetailView</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Publisher</span>
</code></pre></div></div>

<p>get_context_data() 메소드를 정의할 때는 반드시 첫 줄에 super() 메서드를 호출해야 한다.</p>

<p>BookList: Book 테이블로부터 모든 레코드를 가져와 object_list라는 컨텍스트 변수를 구성한다. 템플릿 파일은 디폴트로 books/book_list.html 파일(앱이름/모델이름.html)이 된다.</p>

<p>BookDetail:  Book 테이블로부터 모든 레코드를 가져와 object라는 컨텍스트 변수를 구성한다. 템플릿 파일은 디폴트로 books/book_detail.html 파일(앱이름/모델이름.html)이 된다.</p>

<p>장고에서 권장하는 3단계 템플릿 상속 구조:
base.html &lt;– base_books.html &lt;– xxx_detail.html</p>

<p>xxx_list.html</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{% extends "base_books.html" %}

{% block content %}
  <span class="nt">&lt;h2&gt;</span>Book List<span class="nt">&lt;/h2&gt;</span>
  <span class="nt">&lt;ul&gt;</span>
    {% for book in object_list %}
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{% url 'books:book_detail' book.id %}"</span><span class="nt">&gt;</span>{{ book.title }}<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    {% endfor %}
  <span class="nt">&lt;/ul&gt;</span>
{% endblock content %}
</code></pre></div></div>

<p>xxx_detail.html</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{% extends "base_books.html" %}

{% block content %}
<span class="nt">&lt;h1&gt;</span>{{ object.title }}<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;br&gt;</span>
<span class="nt">&lt;li&gt;</span>Authors:<span class="nt">&lt;/li&gt;</span>
{% for author in object.authors.all %}
  {{ author }}
  {% if not forloop.last %},{% else %}{% endif %}
{% endfor %}
<span class="nt">&lt;li&gt;</span>publisher: {{ object.publisher }}<span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;</span>publication date: {{ object.publication_date }}<span class="nt">&lt;/li&gt;</span>
{% endblock content %}
</code></pre></div></div>


</div>



<div class="pagination">
  
    <a href="/2022-09-05/python-web-programming-8" class="left arrow">&#8592;</a>
  
  
    <a href="/2022-09-03/python-web-programming-6" class="right arrow">&#8594;</a>
  

  <a href="#" class="top">Top</a>
</div>
    </main>

    <footer>
  <span>
    &copy; <time datetime="2023-07-31 21:14:23 +0900">2023</time> Sunmi Moon. Made with Jekyll using the <a href="https://github.com/chesterhow/tale/">Tale</a> theme.
  </span>
</footer>

  </body>
</html>
